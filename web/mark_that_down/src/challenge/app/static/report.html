<!DOCTYPE html>
<html lang="en">
 
<head>
<!-- Required meta tags -->
<meta charset="utf-8" />
<title>Report to admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet">
</head><body class="bg-dark text-center text-light">

<div class="container mt-4">
    <nav class="navbar navbar-expand-lg">
        <div class="collapse navbar-collapse">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link text-light" href="/">Home</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link text-light" href="#">Report</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="align-middle">
        <h1 class="">Report a page to admin</h1>
        <h5>An admin bot will visit your linked page and determine if it's breaking our no-javascript rule</h5>
        <form method="POST" class="form-outline form-white">
            <div class="form-group">
                <div class="col-md-6 offset-md-3">
                    <input type="text" class="my-4 form-control bg-dark text-center text-light" name="url" id="url">
                </div>
            </div>
            </div>
            <button type="submit" class="btn btn-outline-light">Submit</button>
        </form>
        <br>
        <p id="response" class="mt-4"></p>
    </div>
    <script>
        document.getElementById("url").placeholder = document.location.origin;
        const form = document.forms[0];
        resp = document.getElementById('response');

        form.addEventListener('submit', e => {
        e.preventDefault();
        resp.innerHTML = '';
        setTimeout(() => {if (resp.innerHTML != "Too many requests!"){resp.innerHTML = "Waiting.."}}, 1000);
        fetch(document.location.href, {
            method: 'POST',
            headers: {
            'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: "url="+form.url.value
        })
        .then(r => r.text().then(y => resp.innerHTML = y))});
    </script>
</div>
</body>
